<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shaders Collection</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      /* Apply a cleaner font to the whole page */
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background-color: #fff;
        color: #333;
      }
      main {
        max-width: 800px;
        margin: 0 auto;
      }
      .shader-readme {
        padding: 15px 25px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: #fafafa;
        overflow-x: auto;
      }
      .shader-readme img {
        max-width: 100%;
        height: auto;
        margin: 10px 0;
        border-radius: 4px;
        background-color: #eee; /* Shows a placeholder if image is broken */
      }
      .shader-readme a {
        color: #0078d7;
        text-decoration: none;
      }
      .shader-readme a:hover {
        text-decoration: underline;
      }
      .shader-readme h1, .shader-readme h2, .shader-readme h3 {
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
      }
    </style>
</head>
<body>

<main>
  <h2>Shaders Collection</h2>
  <div id="shader-readme" class="shader-readme">Loading shaders...</div>
</main>

<script>
async function fetchShaderReadme() {
  const container = document.getElementById("shader-readme");
  try {
    const res = await fetch("https://raw.githubusercontent.com/hajs110208/Render-dragon-shader-list/main/README.md");
    if (!res.ok) throw new Error("Failed to fetch README.md");
    const markdown = await res.text();

    container.innerHTML = marked.parse(markdown);

    const imageBaseUrl = "https://raw.githubusercontent.com/hajs110208/Render-dragon-shader-list/main/";
    const linkBaseUrl = "https://github.com/hajs110208/Render-dragon-shader-list/blob/main/";

    container.querySelectorAll("img").forEach(img => {
      const originalSrc = img.getAttribute("src");
      if (originalSrc && !originalSrc.startsWith("http")) {
        const finalUrl = new URL(originalSrc, imageBaseUrl).href;
        
        // --- DEBUGGING ---
        // This will print the URL it's trying to load for each image.
        console.log("Attempting to load image from:", finalUrl); 
        
        img.src = finalUrl;
      }
    });

    container.querySelectorAll("a").forEach(a => {
      const originalHref = a.getAttribute("href");
      if (originalHref && !originalHref.startsWith("http") && !originalHref.startsWith("#")) {
        a.href = new URL(originalHref, linkBaseUrl).href;
      }
    });

  } catch (err) {
    console.error(err);
    container.innerHTML = "âš  Could not load shaders list.";
  }
}

document.addEventListener("DOMContentLoaded", fetchShaderReadme);
</script>

</body>
</html>
